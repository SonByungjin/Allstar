{"ast":null,"code":"var _jsxFileName = \"/home/user/\\uBC14\\uD0D5\\uD654\\uBA74/wecode/project/converse/12-Allstar-frontend/src/Pages/Cart/Cart.js\";\nimport React from \"react\";\nimport CartMain from \"./CartMain\";\nimport CartRight from \"./CartRight\";\nimport PromoBanner from \"../../Components/PromoBanner/PromoBanner\";\nimport Nav from \"../../Components/Nav/Nav\";\nimport Footer from \"../../Components/Footer/Footer\";\nimport { secondAPI } from \"../../Config\";\nimport \"./Cart.scss\";\n\nclass Cart extends React.Component {\n  constructor() {\n    super();\n\n    this.updateItems = () => {\n      const {\n        userToken\n      } = this.state;\n      let totalPrice = 0;\n      let totalDiscountPrice = 0;\n      let finalPrice = 0;\n      fetch(`${secondAPI}/orders/cart`, {\n        headers: {\n          Authorization: userToken\n        }\n      }).then(res => res.json()).then(res => {\n        for (let i = 0; i < res.cart_list.length; i++) {\n          totalPrice += res.cart_list[i].price * res.cart_list[i].quantity;\n          totalDiscountPrice += res.cart_list[i].price * (res.cart_list[i].discount_rate / 100);\n          finalPrice = totalPrice - totalDiscountPrice;\n        }\n\n        this.setState({\n          cartItems: res.cart_list,\n          totalPrice: totalPrice.toLocaleString(),\n          totalDiscountPrice: totalDiscountPrice.toLocaleString(),\n          finalPrice: finalPrice.toLocaleString()\n        });\n      });\n    };\n\n    this.handleIncrease = cartId => {\n      const {\n        userToken,\n        cartItems\n      } = this.state;\n      fetch(`${secondAPI}/orders/cart`, {\n        method: \"PATCH\",\n        headers: {\n          Authorization: userToken\n        },\n        body: JSON.stringify({\n          cart_id: cartId,\n          quantity_change: +1\n        })\n      }).then(res => res.json()).then(res => {\n        if (res.message === \"MODIFIED\") {\n          this.updateItems();\n        }\n      });\n    };\n\n    this.handleDecrease = cartId => {\n      const {\n        userToken\n      } = this.state;\n      fetch(`${secondAPI}/orders/cart`, {\n        method: \"PATCH\",\n        headers: {\n          Authorization: userToken\n        },\n        body: JSON.stringify({\n          cart_id: cartId,\n          quantity_change: -1\n        })\n      }).then(res => res.json()).then(res => {\n        if (res.message === \"MODIFIED\") {\n          this.updateItems();\n        }\n      });\n    };\n\n    this.handleOneDelete = cartId => {\n      const {\n        userToken,\n        cartItems\n      } = this.state;\n      const action = window.confirm(\"정말로 지우시겠습니까?\");\n\n      if (action === true) {\n        fetch(`${secondAPI}/orders/cart/${cartId}`, {\n          method: \"DELETE\",\n          headers: {\n            Authorization: userToken\n          }\n        }).then(res => res.json()).then(res => {\n          this.setState({\n            cartItems: cartItems.filter(cartItem => {\n              if (cartItem.cart_id === cartId) {\n                return false;\n              }\n\n              return true;\n            })\n          }, this.updateItems());\n        });\n      } else {\n        return;\n      }\n    };\n\n    this.handleAllDelete = () => {\n      const {\n        userToken,\n        cartItems\n      } = this.state;\n      const action = window.confirm(\"정말로 비우시겠습니까?\");\n\n      if (action === true) {\n        console.log(\"삭제완료\");\n        fetch(`${secondAPI}/orders/cart`, {\n          method: \"DELETE\",\n          headers: {\n            Authorization: userToken\n          }\n        }).then(res => res.json()).then(res => this.setState({\n          cartItems: []\n        }));\n      } else {\n        return;\n      }\n    };\n\n    this.state = {\n      cartItems: [],\n      recommendProducts: [],\n      totalPrice: \"\",\n      totalDiscountPrice: \"\",\n      finalPrice: \"\",\n      userToken: \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhY2NvdW50X2lkIjoyfQ.e2QoqJJ9LKcihDt--hz4VutWxwqsqu2d-tjbT8msc5g\"\n    };\n  }\n\n  componentDidMount() {\n    const {\n      userToken\n    } = this.state;\n    let totalPrice = 0;\n    let totalDiscountPrice = 0;\n    let finalPrice = 0;\n    Promise.all([fetch(`${secondAPI}/orders/cart`, {\n      headers: {\n        Authorization: userToken // Authorization: localStorage.getItem(\"access_token\"),\n\n      }\n    }), fetch(\"http://localhost:3000/data/ProductDetail/CartPageRecommend.json\")]).then(([res1, res2]) => {\n      return Promise.all([res1.json(), res2.json()]);\n    }).then(([res1, res2]) => {\n      for (let i = 0; i < res1.cart_list.length; i++) {\n        totalPrice += res1.cart_list[i].price * res1.cart_list[i].quantity;\n        totalDiscountPrice += res1.cart_list[i].price * (res1.cart_list[i].discount_rate / 100);\n        finalPrice = totalPrice - totalDiscountPrice;\n      }\n\n      this.setState({\n        cartItems: res1.cart_list,\n        totalPrice: totalPrice,\n        totalDiscountPrice: totalDiscountPrice,\n        recommendProducts: res2.CartPageRecommendItems,\n        finalPrice: finalPrice\n      });\n    });\n  }\n\n  render() {\n    const {\n      cartItems,\n      totalPrice,\n      totalDiscountPrice,\n      recommendProducts,\n      finalPrice\n    } = this.state;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(PromoBanner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Nav, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"cart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"section\", {\n      className: \"cartContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CartMain, {\n      cartItems: cartItems,\n      recommendItems: recommendProducts,\n      increaseQuantity: this.handleIncrease,\n      decreaseQuantity: this.handleDecrease,\n      handleOneDelete: this.handleOneDelete,\n      handleAllDelete: this.handleAllDelete,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(CartRight, {\n      totalPrice: totalPrice,\n      totalDiscountPrice: totalDiscountPrice,\n      finalPrice: finalPrice,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nexport default Cart;","map":{"version":3,"sources":["/home/user/바탕화면/wecode/project/converse/12-Allstar-frontend/src/Pages/Cart/Cart.js"],"names":["React","CartMain","CartRight","PromoBanner","Nav","Footer","secondAPI","Cart","Component","constructor","updateItems","userToken","state","totalPrice","totalDiscountPrice","finalPrice","fetch","headers","Authorization","then","res","json","i","cart_list","length","price","quantity","discount_rate","setState","cartItems","toLocaleString","handleIncrease","cartId","method","body","JSON","stringify","cart_id","quantity_change","message","handleDecrease","handleOneDelete","action","window","confirm","filter","cartItem","handleAllDelete","console","log","recommendProducts","componentDidMount","Promise","all","res1","res2","CartPageRecommendItems","render"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport CartMain from \"./CartMain\";\nimport CartRight from \"./CartRight\";\nimport PromoBanner from \"../../Components/PromoBanner/PromoBanner\";\nimport Nav from \"../../Components/Nav/Nav\";\nimport Footer from \"../../Components/Footer/Footer\";\nimport { secondAPI } from \"../../Config\";\nimport \"./Cart.scss\";\n\nclass Cart extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      cartItems: [],\n      recommendProducts: [],\n      totalPrice: \"\",\n      totalDiscountPrice: \"\",\n      finalPrice: \"\",\n      userToken:\n        \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhY2NvdW50X2lkIjoyfQ.e2QoqJJ9LKcihDt--hz4VutWxwqsqu2d-tjbT8msc5g\",\n    };\n  }\n\n  componentDidMount() {\n    const { userToken } = this.state;\n    let totalPrice = 0;\n    let totalDiscountPrice = 0;\n    let finalPrice = 0;\n\n    Promise.all([\n      fetch(`${secondAPI}/orders/cart`, {\n        headers: {\n          Authorization: userToken,\n          // Authorization: localStorage.getItem(\"access_token\"),\n        },\n      }),\n      fetch(\"http://localhost:3000/data/ProductDetail/CartPageRecommend.json\"),\n    ])\n      .then(([res1, res2]) => {\n        return Promise.all([res1.json(), res2.json()]);\n      })\n      .then(([res1, res2]) => {\n        for (let i = 0; i < res1.cart_list.length; i++) {\n          totalPrice += res1.cart_list[i].price * res1.cart_list[i].quantity;\n          totalDiscountPrice +=\n            res1.cart_list[i].price * (res1.cart_list[i].discount_rate / 100);\n          finalPrice = totalPrice - totalDiscountPrice;\n        }\n\n        this.setState({\n          cartItems: res1.cart_list,\n          totalPrice: totalPrice,\n          totalDiscountPrice: totalDiscountPrice,\n          recommendProducts: res2.CartPageRecommendItems,\n          finalPrice: finalPrice,\n        });\n      });\n  }\n\n  updateItems = () => {\n    const { userToken } = this.state;\n    let totalPrice = 0;\n    let totalDiscountPrice = 0;\n    let finalPrice = 0;\n\n    fetch(`${secondAPI}/orders/cart`, {\n      headers: {\n        Authorization: userToken,\n      },\n    })\n      .then((res) => res.json())\n      .then((res) => {\n        for (let i = 0; i < res.cart_list.length; i++) {\n          totalPrice += res.cart_list[i].price * res.cart_list[i].quantity;\n          totalDiscountPrice +=\n            res.cart_list[i].price * (res.cart_list[i].discount_rate / 100);\n          finalPrice = totalPrice - totalDiscountPrice;\n        }\n        this.setState({\n          cartItems: res.cart_list,\n          totalPrice: totalPrice.toLocaleString(),\n          totalDiscountPrice: totalDiscountPrice.toLocaleString(),\n          finalPrice: finalPrice.toLocaleString(),\n        });\n      });\n  };\n\n  handleIncrease = (cartId) => {\n    const { userToken, cartItems } = this.state;\n\n    fetch(`${secondAPI}/orders/cart`, {\n      method: \"PATCH\",\n      headers: {\n        Authorization: userToken,\n      },\n      body: JSON.stringify({\n        cart_id: cartId,\n        quantity_change: +1,\n      }),\n    })\n      .then((res) => res.json())\n      .then((res) => {\n        if (res.message === \"MODIFIED\") {\n          this.updateItems();\n        }\n      });\n  };\n\n  handleDecrease = (cartId) => {\n    const { userToken } = this.state;\n\n    fetch(`${secondAPI}/orders/cart`, {\n      method: \"PATCH\",\n      headers: {\n        Authorization: userToken,\n      },\n      body: JSON.stringify({\n        cart_id: cartId,\n        quantity_change: -1,\n      }),\n    })\n      .then((res) => res.json())\n      .then((res) => {\n        if (res.message === \"MODIFIED\") {\n          this.updateItems();\n        }\n      });\n  };\n\n  handleOneDelete = (cartId) => {\n    const { userToken, cartItems } = this.state;\n\n    const action = window.confirm(\"정말로 지우시겠습니까?\");\n    if (action === true) {\n      fetch(`${secondAPI}/orders/cart/${cartId}`, {\n        method: \"DELETE\",\n        headers: { Authorization: userToken },\n      })\n        .then((res) => res.json())\n        .then((res) => {\n          this.setState(\n            {\n              cartItems: cartItems.filter((cartItem) => {\n                if (cartItem.cart_id === cartId) {\n                  return false;\n                }\n                return true;\n              }),\n            },\n            this.updateItems()\n          );\n        });\n    } else {\n      return;\n    }\n  };\n\n  handleAllDelete = () => {\n    const { userToken, cartItems } = this.state;\n\n    const action = window.confirm(\"정말로 비우시겠습니까?\");\n    if (action === true) {\n      console.log(\"삭제완료\");\n      fetch(`${secondAPI}/orders/cart`, {\n        method: \"DELETE\",\n        headers: { Authorization: userToken },\n      })\n        .then((res) => res.json())\n        .then((res) =>\n          this.setState({\n            cartItems: [],\n          })\n        );\n    } else {\n      return;\n    }\n  };\n\n  render() {\n    const {\n      cartItems,\n      totalPrice,\n      totalDiscountPrice,\n      recommendProducts,\n      finalPrice,\n    } = this.state;\n\n    return (\n      <>\n        <PromoBanner />\n        <Nav />\n        <section className=\"cart\">\n          <section className=\"cartContainer\">\n            <CartMain\n              cartItems={cartItems}\n              recommendItems={recommendProducts}\n              increaseQuantity={this.handleIncrease}\n              decreaseQuantity={this.handleDecrease}\n              handleOneDelete={this.handleOneDelete}\n              handleAllDelete={this.handleAllDelete}\n            />\n            <CartRight\n              totalPrice={totalPrice}\n              totalDiscountPrice={totalDiscountPrice}\n              finalPrice={finalPrice}\n            />\n          </section>\n        </section>\n        <Footer />\n      </>\n    );\n  }\n}\n\nexport default Cart;\n"]},"metadata":{},"sourceType":"module"}