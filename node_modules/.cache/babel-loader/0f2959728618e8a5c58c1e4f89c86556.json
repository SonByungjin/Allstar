{"ast":null,"code":"var _jsxFileName = \"/home/user/\\uBC14\\uD0D5\\uD654\\uBA74/wecode/project/converse/12-Allstar-frontend/src/Pages/ProductList/ProductList.js\";\nimport React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport FilterVerticalBar from \"./Components/FilterVerticalBar/FilterVerticalBar\";\nimport ProductContainer from \"./Components/ProductContainer/ProductContainer\";\nimport FilterHorizontalBar from \"./Components/FilterHorizontalBar/FilterHorizontalBar\";\nimport Footer from \"../../Components/Footer/Footer\";\nimport PromoBanner from \"../../Components/PromoBanner/PromoBanner\";\nimport Nav from \"../../Components/Nav/Nav\";\nimport \"./ProductList.scss\";\nexport class ProductList extends React.Component {\n  constructor() {\n    super();\n\n    this.handleFilter = () => {\n      this.setState({\n        hideFilterVaild: !this.state.hideFilterVaild\n      });\n    };\n\n    this.infiniteScroll = () => {\n      let scrollHeight = Math.max(document.documentElement.scrollHeight, document.body.scrollHeight);\n      let scrollTop = Math.max(document.documentElement.scrollTop, document.body.scrollTop);\n      let clientHeight = document.documentElement.clientHeight;\n\n      if (scrollTop + clientHeight === scrollHeight) {\n        this.pagination();\n      }\n    };\n\n    this.pagination = () => {\n      if (this.state.wholeProducts.length > this.state.products.length) {\n        this.setState({\n          loadingStatus: !this.state.loadingStatus\n        }, () => {\n          let result = this.state.wholeProducts.slice(this.state.products.length, this.state.products.length + 14);\n          setTimeout(() => this.setState({\n            loadingStatus: !this.state.loadingStatus\n          }, () => {\n            this.setState({\n              products: [...this.state.products, ...result]\n            });\n          }), 1000);\n          window.addEventListener(\"scroll\", this.infiniteScroll);\n        });\n      }\n    };\n\n    this.getfilteringData = () => {\n      this.setState({\n        loadingStatus: !this.state.loadingStatus\n      }, () => {\n        fetch(\"/data/ProductList/Products.json\") // fetch(`http://10.58.1.173:8000/products?sub_category_id=${this.state.products}`)\n        .then(res => res.json()).then(res => {\n          // 무한스크롤 기능 확인을 위한 임의 함수\n          let result = res.products.slice(this.state.products.length, this.state.products.length + 14);\n          console.log(`http://10.58.1.173:8000/products?\n            ${this.state.filteringColor ? this.state.filteringColor.map(color => {\n            return `color=${color}`;\n          }) : \"\"}&\n            ${this.state.filteringSize ? this.state.filteringSize.map(size => {\n            return `size=${size}`;\n          }) : \"\"}&\n            ${this.state.filteringSilluet ? this.state.filteringSilluet.map(size => {\n            return `silouette=${size}`;\n          }) : \"\"}\n            `); // let result = res.products;\n\n          setTimeout(() => this.setState({\n            loadingStatus: !this.state.loadingStatus\n          }, () => {\n            this.setState({\n              wholeProducts: res.products,\n              products: [...this.state.products, ...result]\n            });\n          }), 1000);\n          window.addEventListener(\"scroll\", this.infiniteScroll);\n        });\n      });\n    };\n\n    this.getDataInitial = () => {\n      this.setState({\n        loadingStatus: !this.state.loadingStatus\n      }, () => {\n        fetch(\"/data/ProductList/Products.json\") // fetch(`http://10.58.1.173:8000/products?sub_category_id=${this.state.products}`)\n        .then(res => res.json()).then(res => {\n          // 무한스크롤 기능 확인을 위한 임의 함수\n          let result = res.products.slice(this.state.products.length, this.state.products.length + 14); // let result = res.products;\n\n          setTimeout(() => this.setState({\n            loadingStatus: !this.state.loadingStatus\n          }, () => {\n            this.setState({\n              wholeProducts: res.products,\n              products: [...this.state.products, ...result]\n            });\n          }), 1000);\n          window.addEventListener(\"scroll\", this.infiniteScroll);\n        });\n      });\n    };\n\n    this.fixedImage = (colorEl, pdIdx) => {\n      let updateProductMainImage = this.state.ProductMainImage;\n      updateProductMainImage.MainImg[pdIdx].mainId = colorEl.id;\n      updateProductMainImage.MainImg[pdIdx].ImgUrl = colorEl.image_url;\n      this.setState({\n        ProductMainImage: updateProductMainImage\n      });\n    };\n\n    this.DynamicRouting = () => {\n      console.log(this.props.history);\n      console.log(this.props.location);\n      console.log(this.props.match);\n    };\n\n    this.filteringColor = Color => {\n      this.setState({\n        filteringColor: [...this.state.filteringColor, Color]\n      });\n      this.getfilteringData();\n    };\n\n    this.filteringSize = size => {\n      this.setState({\n        filteringSize: [...this.state.filteringSize, size]\n      });\n      this.getfilteringData();\n    };\n\n    this.filteringSilluet = silluetEngName => {\n      this.setState({\n        filteringSilluet: [...this.state.filteringSilluet, silluetEngName]\n      });\n      this.getfilteringData();\n    };\n\n    this.state = {\n      wholeProducts: [],\n      products: [],\n      hideFilterVaild: false,\n      loadingStatus: false,\n      ProductMainImage: {\n        MainImg: []\n      },\n      filteringColor: [],\n      filteringSize: [],\n      filteringSilluet: []\n    };\n  }\n\n  componentDidMount() {\n    window.onbeforeunload = () => {\n      window.scrollTo(0, 0);\n    };\n\n    this.getDataInitial();\n  }\n\n  render() {\n    const {\n      wholeProducts,\n      products,\n      hideFilterVaild,\n      loadingStatus,\n      ProductMainImage\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ProductList\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: loadingStatus ? \"loadingImageValid\" : \"loadingImageUnvalid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      alt: \"loadingImg\",\n      src: \"/images/productList/preloader.gif\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(PromoBanner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Nav, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"header\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"shoesTitle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 11\n      }\n    }, \"SHOES\"), /*#__PURE__*/React.createElement(\"img\", {\n      alt: \"headerImges\",\n      src: \"https://image.converse.co.kr/cmsstatic/structured-content/15400/D-Converse-SP20-PWH-Best-Sellers-.jpg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(FilterHorizontalBar, {\n      hideFilterValid: hideFilterVaild,\n      handleFilter: this.handleFilter,\n      cnt: wholeProducts.length,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bottomOfPage\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: hideFilterVaild ? \"hideVerticalFilterValild\" : \"hideVerticalFilterUnvalild\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(FilterVerticalBar, {\n      filteringColor: Color => this.filteringColor(Color),\n      filteringSize: size => this.filteringSize(size),\n      filteringSilluet: silluetEngName => this.filteringSilluet(silluetEngName),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"main\", {\n      className: hideFilterVaild ? \"HideProductListMain\" : \"ProductListMain\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 11\n      }\n    }, products.length > 0 && products.map((product, pdIdx) => {\n      const {\n        id,\n        image_url,\n        series_name,\n        price\n      } = product.main_image;\n      const {\n        color_image\n      } = product;\n      ProductMainImage.MainImg.push({\n        idx: pdIdx,\n        mainId: id,\n        ImgUrl: image_url\n      });\n      return /*#__PURE__*/React.createElement(ProductContainer, {\n        key: pdIdx,\n        hideFilterValid: hideFilterVaild,\n        mainId: id,\n        imgUrl: ProductMainImage.MainImg[pdIdx].ImgUrl,\n        name: series_name,\n        price: price,\n        colorList: color_image,\n        fixedImage: colorEl => this.fixedImage(colorEl, pdIdx),\n        DynamicRouting: this.DynamicRouting,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 19\n        }\n      });\n    }))), /*#__PURE__*/React.createElement(Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\nexport default withRouter(ProductList);","map":{"version":3,"sources":["/home/user/바탕화면/wecode/project/converse/12-Allstar-frontend/src/Pages/ProductList/ProductList.js"],"names":["React","withRouter","FilterVerticalBar","ProductContainer","FilterHorizontalBar","Footer","PromoBanner","Nav","ProductList","Component","constructor","handleFilter","setState","hideFilterVaild","state","infiniteScroll","scrollHeight","Math","max","document","documentElement","body","scrollTop","clientHeight","pagination","wholeProducts","length","products","loadingStatus","result","slice","setTimeout","window","addEventListener","getfilteringData","fetch","then","res","json","console","log","filteringColor","map","color","filteringSize","size","filteringSilluet","getDataInitial","fixedImage","colorEl","pdIdx","updateProductMainImage","ProductMainImage","MainImg","mainId","id","ImgUrl","image_url","DynamicRouting","props","history","location","match","Color","silluetEngName","componentDidMount","onbeforeunload","scrollTo","render","product","series_name","price","main_image","color_image","push","idx"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport FilterVerticalBar from \"./Components/FilterVerticalBar/FilterVerticalBar\";\nimport ProductContainer from \"./Components/ProductContainer/ProductContainer\";\nimport FilterHorizontalBar from \"./Components/FilterHorizontalBar/FilterHorizontalBar\";\nimport Footer from \"../../Components/Footer/Footer\";\nimport PromoBanner from \"../../Components/PromoBanner/PromoBanner\";\nimport Nav from \"../../Components/Nav/Nav\";\nimport \"./ProductList.scss\";\n\nexport class ProductList extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      wholeProducts: [],\n      products: [],\n      hideFilterVaild: false,\n      loadingStatus: false,\n      ProductMainImage: { MainImg: [] },\n      filteringColor: [],\n      filteringSize: [],\n      filteringSilluet: [],\n    };\n  }\n\n  handleFilter = () => {\n    this.setState({\n      hideFilterVaild: !this.state.hideFilterVaild,\n    });\n  };\n\n  infiniteScroll = () => {\n    let scrollHeight = Math.max(\n      document.documentElement.scrollHeight,\n      document.body.scrollHeight\n    );\n    let scrollTop = Math.max(\n      document.documentElement.scrollTop,\n      document.body.scrollTop\n    );\n    let clientHeight = document.documentElement.clientHeight;\n\n    if (scrollTop + clientHeight === scrollHeight) {\n      this.pagination();\n    }\n  };\n\n  pagination = () => {\n    if (this.state.wholeProducts.length > this.state.products.length) {\n      this.setState(\n        {\n          loadingStatus: !this.state.loadingStatus,\n        },\n        () => {\n          let result = this.state.wholeProducts.slice(\n            this.state.products.length,\n            this.state.products.length + 14\n          );\n\n          setTimeout(\n            () =>\n              this.setState(\n                {\n                  loadingStatus: !this.state.loadingStatus,\n                },\n                () => {\n                  this.setState({\n                    products: [...this.state.products, ...result],\n                  });\n                }\n              ),\n            1000\n          );\n          window.addEventListener(\"scroll\", this.infiniteScroll);\n        }\n      );\n    }\n  };\n\n  getfilteringData = () => {\n    this.setState(\n      {\n        loadingStatus: !this.state.loadingStatus,\n      },\n      () => {\n        fetch(\"/data/ProductList/Products.json\")\n          // fetch(`http://10.58.1.173:8000/products?sub_category_id=${this.state.products}`)\n          .then((res) => res.json())\n          .then((res) => {\n            // 무한스크롤 기능 확인을 위한 임의 함수\n            let result = res.products.slice(\n              this.state.products.length,\n              this.state.products.length + 14\n            );\n            console.log(`http://10.58.1.173:8000/products?\n            ${\n              this.state.filteringColor\n                ? this.state.filteringColor.map((color) => {\n                    return `color=${color}`;\n                  })\n                : \"\"\n            }&\n            ${\n              this.state.filteringSize\n                ? this.state.filteringSize.map((size) => {\n                    return `size=${size}`;\n                  })\n                : \"\"\n            }&\n            ${\n              this.state.filteringSilluet\n                ? this.state.filteringSilluet.map((size) => {\n                    return `silouette=${size}`;\n                  })\n                : \"\"\n            }\n            `);\n\n            // let result = res.products;\n            setTimeout(\n              () =>\n                this.setState(\n                  {\n                    loadingStatus: !this.state.loadingStatus,\n                  },\n                  () => {\n                    this.setState({\n                      wholeProducts: res.products,\n                      products: [...this.state.products, ...result],\n                    });\n                  }\n                ),\n              1000\n            );\n            window.addEventListener(\"scroll\", this.infiniteScroll);\n          });\n      }\n    );\n  };\n\n  getDataInitial = () => {\n    this.setState(\n      {\n        loadingStatus: !this.state.loadingStatus,\n      },\n      () => {\n        fetch(\"/data/ProductList/Products.json\")\n          // fetch(`http://10.58.1.173:8000/products?sub_category_id=${this.state.products}`)\n          .then((res) => res.json())\n          .then((res) => {\n            // 무한스크롤 기능 확인을 위한 임의 함수\n            let result = res.products.slice(\n              this.state.products.length,\n              this.state.products.length + 14\n            );\n\n            // let result = res.products;\n            setTimeout(\n              () =>\n                this.setState(\n                  {\n                    loadingStatus: !this.state.loadingStatus,\n                  },\n                  () => {\n                    this.setState({\n                      wholeProducts: res.products,\n                      products: [...this.state.products, ...result],\n                    });\n                  }\n                ),\n              1000\n            );\n            window.addEventListener(\"scroll\", this.infiniteScroll);\n          });\n      }\n    );\n  };\n\n  fixedImage = (colorEl, pdIdx) => {\n    let updateProductMainImage = this.state.ProductMainImage;\n    updateProductMainImage.MainImg[pdIdx].mainId = colorEl.id;\n    updateProductMainImage.MainImg[pdIdx].ImgUrl = colorEl.image_url;\n    this.setState({\n      ProductMainImage: updateProductMainImage,\n    });\n  };\n\n  DynamicRouting = () => {\n    console.log(this.props.history);\n    console.log(this.props.location);\n    console.log(this.props.match);\n  };\n\n  filteringColor = (Color) => {\n    this.setState({\n      filteringColor: [...this.state.filteringColor, Color],\n    });\n    this.getfilteringData();\n  };\n\n  filteringSize = (size) => {\n    this.setState({\n      filteringSize: [...this.state.filteringSize, size],\n    });\n    this.getfilteringData();\n  };\n\n  filteringSilluet = (silluetEngName) => {\n    this.setState({\n      filteringSilluet: [...this.state.filteringSilluet, silluetEngName],\n    });\n    this.getfilteringData();\n  };\n\n  componentDidMount() {\n    window.onbeforeunload = () => {\n      window.scrollTo(0, 0);\n    };\n    this.getDataInitial();\n  }\n\n  render() {\n    const {\n      wholeProducts,\n      products,\n      hideFilterVaild,\n      loadingStatus,\n      ProductMainImage,\n    } = this.state;\n    return (\n      <div className=\"ProductList\">\n        <div\n          className={\n            loadingStatus ? \"loadingImageValid\" : \"loadingImageUnvalid\"\n          }\n        >\n          <img alt=\"loadingImg\" src=\"/images/productList/preloader.gif\" />\n        </div>\n        <PromoBanner />\n        <Nav />\n        <header>\n          <span className=\"shoesTitle\">SHOES</span>\n          <img\n            alt=\"headerImges\"\n            src=\"https://image.converse.co.kr/cmsstatic/structured-content/15400/D-Converse-SP20-PWH-Best-Sellers-.jpg\"\n          />\n        </header>\n        <FilterHorizontalBar\n          hideFilterValid={hideFilterVaild}\n          handleFilter={this.handleFilter}\n          cnt={wholeProducts.length}\n        />\n        <div className=\"bottomOfPage\">\n          <div\n            className={\n              hideFilterVaild\n                ? \"hideVerticalFilterValild\"\n                : \"hideVerticalFilterUnvalild\"\n            }\n          >\n            <FilterVerticalBar\n              filteringColor={(Color) => this.filteringColor(Color)}\n              filteringSize={(size) => this.filteringSize(size)}\n              filteringSilluet={(silluetEngName) =>\n                this.filteringSilluet(silluetEngName)\n              }\n            />\n          </div>\n          <main\n            className={\n              hideFilterVaild ? \"HideProductListMain\" : \"ProductListMain\"\n            }\n          >\n            {products.length > 0 &&\n              products.map((product, pdIdx) => {\n                const {\n                  id,\n                  image_url,\n                  series_name,\n                  price,\n                } = product.main_image;\n                const { color_image } = product;\n                ProductMainImage.MainImg.push({\n                  idx: pdIdx,\n                  mainId: id,\n                  ImgUrl: image_url,\n                });\n                return (\n                  <ProductContainer\n                    key={pdIdx}\n                    hideFilterValid={hideFilterVaild}\n                    mainId={id}\n                    imgUrl={ProductMainImage.MainImg[pdIdx].ImgUrl}\n                    name={series_name}\n                    price={price}\n                    colorList={color_image}\n                    fixedImage={(colorEl) => this.fixedImage(colorEl, pdIdx)}\n                    DynamicRouting={this.DynamicRouting}\n                  />\n                );\n              })}\n          </main>\n        </div>\n        {/* <footer>footer 컴포넌트 예정</footer> */}\n        <Footer />\n      </div>\n    );\n  }\n}\n\nexport default withRouter(ProductList);\n"]},"metadata":{},"sourceType":"module"}