{"ast":null,"code":"var _jsxFileName = \"/home/user/\\uBC14\\uD0D5\\uD654\\uBA74/wecode/project/converse/12-Allstar-frontend/src/Pages/ProductDetail/ProductDetailRight/ProductRightSize.js\";\nimport React from \"react\";\nimport SizeGuide from \"../../../Components/SizeGuideModal/SizeGuide\";\nimport SizeFind from \"../../../Components/SizeGuideModal/SizeFind\";\nimport { firstAPI, secondAPI } from \"../../../Config\";\nimport \"./ProductRightSize.scss\";\nimport { Link } from \"react-router-dom\";\n\nclass ProductRightSize extends React.Component {\n  constructor() {\n    super();\n\n    this.handleClick = index => {\n      this.setState({\n        current: index\n      });\n    };\n\n    this.openSizeFindModal = () => {\n      this.setState({\n        isSizeFindOpen: !this.state.isSizeFindOpen\n      });\n    };\n\n    this.openSizeGuideModal = () => {\n      this.setState({\n        isSizeGuideOpen: !this.state.isSizeGuideOpen\n      });\n    };\n\n    this.decreaseQuantity = () => {\n      if (this.state.quantity > 1) {\n        this.setState({\n          quantity: this.state.quantity - 1,\n          quantityOverFive: false\n        });\n      }\n    };\n\n    this.increaseQuantity = () => {\n      if (this.state.quantity < 5) {\n        this.setState({\n          quantity: this.state.quantity + 1\n        });\n      } else {\n        this.setState({\n          quantityOverFive: true\n        });\n      }\n    };\n\n    this.updateItems = () => {\n      fetch(`${firstAPI}/orders/cart`, {\n        headers: {\n          Authorization: localStorage.getItem(\"token\")\n        }\n      }).then(res => res.json()).then(res => {\n        this.setState({\n          cartItems: res.cart_list\n        });\n      });\n    };\n\n    this.addToCart = (id, quantity, size) => {\n      const {\n        cartItems\n      } = this.state;\n      const {\n        showMiniCart\n      } = this.props;\n      console.log(cartItems);\n\n      for (let i = 0; i < cartItems.length; i++) {\n        if (cartItems[i].id === Number(id) && cartItems[i].size == size) {\n          fetch(`${firstAPI}/orders/cart`, {\n            method: \"PATCH\",\n            headers: {\n              Authorization: localStorage.getItem(\"token\")\n            },\n            body: JSON.stringify({\n              cart_id: cartItems[i].cart_id,\n              quantity_change: +quantity\n            })\n          }).then(res => res.json()).then(res => {\n            if (res.message === \"MODIFIED\") {\n              console.log(\"success\");\n              showMiniCart();\n              this.updateItems();\n            } else {\n              console.log(res.message);\n            }\n          });\n          return;\n        }\n      }\n\n      fetch(`${firstAPI}/orders/cart`, {\n        method: \"POST\",\n        headers: {\n          Authorization: localStorage.getItem(\"token\")\n        },\n        body: JSON.stringify({\n          product_id: id,\n          quantity: quantity,\n          size: size\n        })\n      }).then(res => res.json()).then(res => {\n        showMiniCart();\n        this.updateItems();\n      });\n    };\n\n    this.state = {\n      isLogined: true,\n      current: \"\",\n      isSizeFindOpen: false,\n      isSizeGuideOpen: false,\n      quantity: 1,\n      quantityOverFive: false,\n      cartItems: [],\n      cartItemsId: []\n    };\n  }\n\n  componentDidMount() {\n    fetch(`${firstAPI}/orders/cart`, {\n      headers: {\n        Authorization: localStorage.getItem(\"token\")\n      }\n    }).then(res => res.json()).then(res => {\n      this.setState({\n        cartItems: res.cart_list\n      });\n    }); // sessionStorage.getItem(\"access_token\")\n    //   ? this.setState({ isLogined: true })\n    //   : this.setState({ isLogined: false });\n  }\n\n  render() {\n    const {\n      productId,\n      productInfo\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"section\", {\n      className: \"ProductRightSize\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"first\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sizeClick\",\n      onClick: this.openSizeFindModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 11\n      }\n    }, \"\\uC0AC\\uC774\\uC988\\uAC00 \\uACE0\\uBBFC\\uB418\\uBA74 \\uD074\\uB9AD\\uD558\\uC138\\uC694!\"), this.state.isSizeFindOpen && /*#__PURE__*/React.createElement(SizeFind, {\n      isSizeFindOpen: this.openSizeFindModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"sizeGuideBtn\",\n      onClick: this.openSizeGuideModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 11\n      }\n    }, \"\\uC0AC\\uC774\\uC988 \\uAC00\\uC774\\uB4DC\"), this.state.isSizeGuideOpen && /*#__PURE__*/React.createElement(SizeGuide, {\n      isSizeGuideOpen: this.openSizeGuideModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"second\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"size\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 11\n      }\n    }, productInfo.size_list && productInfo.size_list.map((size, index) => /*#__PURE__*/React.createElement(\"span\", {\n      key: index,\n      className: this.state.current === index ? \"Focused\" : \"NotFocused\",\n      onClick: () => {\n        this.handleClick(index);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 17\n      }\n    }, size))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"quantity\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"quantityOne\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"quantitySelect\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 15\n      }\n    }, this.state.quantity), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"decrease\",\n      onClick: this.decreaseQuantity,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 15\n      }\n    }, \"-\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"increase\",\n      onClick: this.increaseQuantity,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 15\n      }\n    }, \"+\")), this.state.quantityOverFive && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"quantityTwo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 17\n      }\n    }, \"5\\uAC1C \\uAE4C\\uC9C0 \\uAD6C\\uB9E4\\uAC00\\uB2A5 \\uD569\\uB2C8\\uB2E4\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"third\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 9\n      }\n    }, this.state.isLogined ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"isLogin\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"cart\",\n      onClick: () => {\n        this.addToCart(productId, this.state.quantity, productInfo.size_list[this.state.current]);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 15\n      }\n    }, \"\\uC7A5\\uBC14\\uAD6C\\uB2C8\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"buy\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 15\n      }\n    }, \"\\uBC14\\uB85C\\uAD6C\\uB9E4\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"heart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 17\n      }\n    }, \"\\u2665\"))) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"isLogout\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/Login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"loginBtn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 17\n      }\n    }, \"\\uB85C\\uADF8\\uC778\")))));\n  }\n\n}\n\nexport default ProductRightSize;","map":{"version":3,"sources":["/home/user/바탕화면/wecode/project/converse/12-Allstar-frontend/src/Pages/ProductDetail/ProductDetailRight/ProductRightSize.js"],"names":["React","SizeGuide","SizeFind","firstAPI","secondAPI","Link","ProductRightSize","Component","constructor","handleClick","index","setState","current","openSizeFindModal","isSizeFindOpen","state","openSizeGuideModal","isSizeGuideOpen","decreaseQuantity","quantity","quantityOverFive","increaseQuantity","updateItems","fetch","headers","Authorization","localStorage","getItem","then","res","json","cartItems","cart_list","addToCart","id","size","showMiniCart","props","console","log","i","length","Number","method","body","JSON","stringify","cart_id","quantity_change","message","product_id","isLogined","cartItemsId","componentDidMount","render","productId","productInfo","size_list","map"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport SizeGuide from \"../../../Components/SizeGuideModal/SizeGuide\";\nimport SizeFind from \"../../../Components/SizeGuideModal/SizeFind\";\nimport { firstAPI, secondAPI } from \"../../../Config\";\nimport \"./ProductRightSize.scss\";\nimport { Link } from \"react-router-dom\";\n\nclass ProductRightSize extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      isLogined: true,\n      current: \"\",\n      isSizeFindOpen: false,\n      isSizeGuideOpen: false,\n      quantity: 1,\n      quantityOverFive: false,\n      cartItems: [],\n      cartItemsId: [],\n    };\n  }\n\n  componentDidMount() {\n    fetch(`${firstAPI}/orders/cart`, {\n      headers: {\n        Authorization: localStorage.getItem(\"token\"),\n      },\n    })\n      .then((res) => res.json())\n      .then((res) => {\n        this.setState({\n          cartItems: res.cart_list,\n        });\n      });\n    // sessionStorage.getItem(\"access_token\")\n    //   ? this.setState({ isLogined: true })\n    //   : this.setState({ isLogined: false });\n  }\n\n  handleClick = (index) => {\n    this.setState({ current: index });\n  };\n\n  openSizeFindModal = () => {\n    this.setState({\n      isSizeFindOpen: !this.state.isSizeFindOpen,\n    });\n  };\n\n  openSizeGuideModal = () => {\n    this.setState({\n      isSizeGuideOpen: !this.state.isSizeGuideOpen,\n    });\n  };\n\n  decreaseQuantity = () => {\n    if (this.state.quantity > 1) {\n      this.setState({\n        quantity: this.state.quantity - 1,\n        quantityOverFive: false,\n      });\n    }\n  };\n\n  increaseQuantity = () => {\n    if (this.state.quantity < 5) {\n      this.setState({\n        quantity: this.state.quantity + 1,\n      });\n    } else {\n      this.setState({ quantityOverFive: true });\n    }\n  };\n\n  updateItems = () => {\n    fetch(`${firstAPI}/orders/cart`, {\n      headers: {\n        Authorization: localStorage.getItem(\"token\"),\n      },\n    })\n      .then((res) => res.json())\n      .then((res) => {\n        this.setState({\n          cartItems: res.cart_list,\n        });\n      });\n  };\n\n  addToCart = (id, quantity, size) => {\n    const { cartItems } = this.state;\n    const { showMiniCart } = this.props;\n\n    console.log(cartItems);\n    for (let i = 0; i < cartItems.length; i++) {\n      if (cartItems[i].id === Number(id) && cartItems[i].size == size) {\n        fetch(`${firstAPI}/orders/cart`, {\n          method: \"PATCH\",\n          headers: {\n            Authorization: localStorage.getItem(\"token\"),\n          },\n          body: JSON.stringify({\n            cart_id: cartItems[i].cart_id,\n            quantity_change: +quantity,\n          }),\n        })\n          .then((res) => res.json())\n          .then((res) => {\n            if (res.message === \"MODIFIED\") {\n              console.log(\"success\");\n              showMiniCart();\n              this.updateItems();\n            } else {\n              console.log(res.message);\n            }\n          });\n        return;\n      }\n    }\n    fetch(`${firstAPI}/orders/cart`, {\n      method: \"POST\",\n      headers: {\n        Authorization: localStorage.getItem(\"token\"),\n      },\n      body: JSON.stringify({\n        product_id: id,\n        quantity: quantity,\n        size: size,\n      }),\n    })\n      .then((res) => res.json())\n      .then((res) => {\n        showMiniCart();\n        this.updateItems();\n      });\n  };\n\n  render() {\n    const { productId, productInfo } = this.props;\n\n    return (\n      <section className=\"ProductRightSize\">\n        <div className=\"first\">\n          <div className=\"sizeClick\" onClick={this.openSizeFindModal}>\n            사이즈가 고민되면 클릭하세요!\n          </div>\n          {this.state.isSizeFindOpen && (\n            <SizeFind isSizeFindOpen={this.openSizeFindModal} />\n          )}\n          <span className=\"sizeGuideBtn\" onClick={this.openSizeGuideModal}>\n            사이즈 가이드\n          </span>\n          {this.state.isSizeGuideOpen && (\n            <SizeGuide isSizeGuideOpen={this.openSizeGuideModal} />\n          )}\n        </div>\n        <div className=\"second\">\n          <div className=\"size\">\n            {productInfo.size_list &&\n              productInfo.size_list.map((size, index) => (\n                <span\n                  key={index}\n                  className={\n                    this.state.current === index ? \"Focused\" : \"NotFocused\"\n                  }\n                  onClick={() => {\n                    this.handleClick(index);\n                  }}\n                >\n                  {size}\n                </span>\n              ))}\n          </div>\n          <div className=\"quantity\">\n            <div className=\"quantityOne\">\n              <span className=\"quantitySelect\">{this.state.quantity}</span>\n              <button className=\"decrease\" onClick={this.decreaseQuantity}>\n                -\n              </button>\n              <button className=\"increase\" onClick={this.increaseQuantity}>\n                +\n              </button>\n            </div>\n            {this.state.quantityOverFive && (\n              <div className=\"quantityTwo\">\n                <span>5개 까지 구매가능 합니다</span>\n              </div>\n            )}\n          </div>\n        </div>\n        <div className=\"third\">\n          {this.state.isLogined ? (\n            <div className=\"isLogin\">\n              <span\n                className=\"cart\"\n                onClick={() => {\n                  this.addToCart(\n                    productId,\n                    this.state.quantity,\n                    productInfo.size_list[this.state.current]\n                  );\n                }}\n              >\n                장바구니\n              </span>\n              <span className=\"buy\">바로구매</span>\n              <span className=\"heart\">\n                <p>♥</p>\n              </span>\n            </div>\n          ) : (\n            <div className=\"isLogout\">\n              <Link to=\"/Login\">\n                <div className=\"loginBtn\">로그인</div>\n              </Link>\n            </div>\n          )}\n        </div>\n      </section>\n    );\n  }\n}\n\nexport default ProductRightSize;\n"]},"metadata":{},"sourceType":"module"}