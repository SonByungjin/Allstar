{"ast":null,"code":"var _jsxFileName = \"/home/user/\\uBC14\\uD0D5\\uD654\\uBA74/wecode/project/converse/12-Allstar-frontend/src/Components/MiniCart/MiniCart.js\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { secondAPI } from \"../../Config\";\nimport iconData from \"./icon\";\nimport \"./MiniCart.scss\";\n\nclass MiniCart extends React.Component {\n  constructor(props) {\n    super();\n\n    this.handleOneDelete = cartId => {\n      const {\n        userToken,\n        cartItems\n      } = this.state;\n      const action = window.confirm(\"정말로 지우시겠습니까?\");\n\n      if (action === true) {\n        fetch(`${secondAPI}/orders/cart/${cartId}`, {\n          method: \"DELETE\",\n          headers: {\n            Authorization: userToken\n          }\n        }).then(res => res.json()).then(res => {\n          this.setState({\n            cartItems: cartItems.filter(cartItem => {\n              if (cartItem.cart_id === cartId) {\n                return false;\n              }\n\n              return true;\n            })\n          }, this.updateItems());\n        });\n      } else {\n        return;\n      }\n    };\n\n    this.updateItems = () => {\n      const {\n        userToken\n      } = this.state;\n      let totalPrice = 0;\n      let totalDiscountPrice = 0;\n      let finalPrice = 0;\n      fetch(`${secondAPI}/orders/cart`, {\n        headers: {\n          Authorization: userToken\n        }\n      }).then(res => res.json()).then(res => {\n        for (let i = 0; i < res.cart_list.length; i++) {\n          totalPrice += res.cart_list[i].price * res.cart_list[i].quantity;\n          totalDiscountPrice += res.cart_list[i].price * (res.cart_list[i].discount_rate / 100);\n          finalPrice = totalPrice - totalDiscountPrice;\n        }\n\n        this.setState({\n          cartItems: res.cart_list,\n          totalPrice: totalPrice.toLocaleString(),\n          totalDiscountPrice: totalDiscountPrice.toLocaleString(),\n          finalPrice: finalPrice.toLocaleString()\n        });\n      });\n    };\n\n    this.state = {\n      cartItems: [],\n      totalPrice: \"\",\n      totalDiscountPrice: \"\",\n      userToken: \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhY2NvdW50X2lkIjoyfQ.e2QoqJJ9LKcihDt--hz4VutWxwqsqu2d-tjbT8msc5g\"\n    };\n  }\n\n  componentDidMount() {\n    const {\n      userToken\n    } = this.state;\n    let totalPrice = 0;\n    let totalDiscountPrice = 0;\n    let finalPrice = 0;\n    fetch(`${secondAPI}/orders/cart`, {\n      headers: {\n        Authorization: userToken\n      }\n    }).then(res => res.json()).then(res => {\n      for (let i = 0; i < res.cart_list.length; i++) {\n        totalPrice += res.cart_list[i].price * res.cart_list[i].quantity;\n        totalDiscountPrice += res.cart_list[i].price * (res.cart_list[i].discount_rate / 100);\n        finalPrice = totalPrice - totalDiscountPrice;\n      }\n\n      this.setState({\n        cartItems: res.cart_list,\n        totalPrice: totalPrice.toLocaleString(),\n        totalDiscountPrice: totalDiscountPrice.toLocaleString(),\n        finalPrice: finalPrice.toLocaleString()\n      });\n    });\n  }\n\n  render() {\n    const {\n      cartItems,\n      totalCost,\n      totalDiscountPrice,\n      finalPrice\n    } = this.state;\n    const {\n      showMiniCart\n    } = this.props;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"section\", {\n      className: \"miniCart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sectionMiniCart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"miniCartDrop\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"miniCartHeader\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"headerItems\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }\n    }, \"\\uBBF8\\uB2C8 \\uC7A5\\uBC14\\uAD6C\\uB2C8\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"headerActions\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"miniCartLink\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/cart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 21\n      }\n    }, iconData.cartIcon)), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"miniCartClose\",\n      onClick: showMiniCart,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 19\n      }\n    }, iconData.closeIcon))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"productContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 15\n      }\n    }, cartItems === null || cartItems === void 0 ? void 0 : cartItems.map((product, index) => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"miniCartProduct\",\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"productMini\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"imgShoes\",\n      title: \"\\uB8E8\\uC774 \\uB85C\\uD398\\uC988 \\uD504\\uB85C \\uD074\\uB798\\uC2DD \\uC2A4\\uC6E8\\uC774\\uB4DC\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: product.main_image,\n      alt: \"\\uB8E8\\uC774 \\uB85C\\uD398\\uC988 \\uD504\\uB85C \\uD074\\uB798\\uC2DD \\uC2A4\\uC6E8\\uC774\\uB4DC\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"productMiniDetails\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"productMiniName\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 25\n      }\n    }, product.series_name)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"productMiniOptions\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 25\n      }\n    }, product.color, \"/\"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 25\n      }\n    }, product.size), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 25\n      }\n    }, \" \", product.quantity, \"\\uAC1C\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"productMiniPrice\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: !product.discount_rate ? \"miniCartPrice\" : \"miniCartPrice underline\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 27\n      }\n    }, product.price, \"\\uC6D0\", \" \"), product.discount_rate && /*#__PURE__*/React.createElement(\"span\", {\n      className: \"productSale\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 27\n      }\n    }, product.price * ((100 - product.discount_rate) / 100), \"\\uC6D0\"), product.discount_rate && /*#__PURE__*/React.createElement(\"span\", {\n      className: \"discountRate\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 27\n      }\n    }, product.discount_rate, \"%\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"removeBtn\",\n      onClick: () => this.handleOneDelete(product.cart_id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 21\n      }\n    }, iconData.closeIcon)))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"miniCartTotals\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"subTotals\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"subTotalsCalc\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"totalCost\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 21\n      }\n    }, \"\\uCD1D \\uC0C1\\uD488\\uAE08\\uC561\"), /*#__PURE__*/React.createElement(\"strong\", {\n      className: \"totalValue\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 21\n      }\n    }, finalPrice, \" \\uC6D0\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"subTotalsMsg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"deliveryText\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 21\n      }\n    }, \"\\uBC30\\uC1A1\\uBE44 \\uD655\\uC778 \\uBC0F \\uD504\\uB85C\\uBAA8\\uC158 \\uCF54\\uB4DC \\uC0AC\\uC6A9\\uC740 \\uC8FC\\uBB38\\uC11C\\uC5D0\\uC11C \\uAC00\\uB2A5\\uD569\\uB2C8\\uB2E4.\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"miniCartActions\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"shopNow\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 19\n      }\n    }, \"\\uBC14\\uB85C\\uAD6C\\uB9E4\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"goToCart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/cart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 21\n      }\n    }, \"\\uC7A5\\uBC14\\uAD6C\\uB2C8\\uB85C \\uC774\\uB3D9\"))))))));\n  }\n\n}\n\nexport default MiniCart;","map":{"version":3,"sources":["/home/user/바탕화면/wecode/project/converse/12-Allstar-frontend/src/Components/MiniCart/MiniCart.js"],"names":["React","Link","secondAPI","iconData","MiniCart","Component","constructor","props","handleOneDelete","cartId","userToken","cartItems","state","action","window","confirm","fetch","method","headers","Authorization","then","res","json","setState","filter","cartItem","cart_id","updateItems","totalPrice","totalDiscountPrice","finalPrice","i","cart_list","length","price","quantity","discount_rate","toLocaleString","componentDidMount","render","totalCost","showMiniCart","cartIcon","closeIcon","map","product","index","main_image","series_name","color","size"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { secondAPI } from \"../../Config\";\nimport iconData from \"./icon\";\nimport \"./MiniCart.scss\";\n\nclass MiniCart extends React.Component {\n  constructor(props) {\n    super();\n    this.state = {\n      cartItems: [],\n      totalPrice: \"\",\n      totalDiscountPrice: \"\",\n      userToken:\n        \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhY2NvdW50X2lkIjoyfQ.e2QoqJJ9LKcihDt--hz4VutWxwqsqu2d-tjbT8msc5g\",\n    };\n  }\n\n  componentDidMount() {\n    const { userToken } = this.state;\n    let totalPrice = 0;\n    let totalDiscountPrice = 0;\n    let finalPrice = 0;\n\n    fetch(`${secondAPI}/orders/cart`, {\n      headers: {\n        Authorization: userToken,\n      },\n    })\n      .then((res) => res.json())\n      .then((res) => {\n        for (let i = 0; i < res.cart_list.length; i++) {\n          totalPrice += res.cart_list[i].price * res.cart_list[i].quantity;\n          totalDiscountPrice +=\n            res.cart_list[i].price * (res.cart_list[i].discount_rate / 100);\n          finalPrice = totalPrice - totalDiscountPrice;\n        }\n        this.setState({\n          cartItems: res.cart_list,\n          totalPrice: totalPrice.toLocaleString(),\n          totalDiscountPrice: totalDiscountPrice.toLocaleString(),\n          finalPrice: finalPrice.toLocaleString(),\n        });\n      });\n  }\n\n  handleOneDelete = (cartId) => {\n    const { userToken, cartItems } = this.state;\n\n    const action = window.confirm(\"정말로 지우시겠습니까?\");\n    if (action === true) {\n      fetch(`${secondAPI}/orders/cart/${cartId}`, {\n        method: \"DELETE\",\n        headers: { Authorization: userToken },\n      })\n        .then((res) => res.json())\n        .then((res) => {\n          this.setState(\n            {\n              cartItems: cartItems.filter((cartItem) => {\n                if (cartItem.cart_id === cartId) {\n                  return false;\n                }\n                return true;\n              }),\n            },\n            this.updateItems()\n          );\n        });\n    } else {\n      return;\n    }\n  };\n\n  updateItems = () => {\n    const { userToken } = this.state;\n    let totalPrice = 0;\n    let totalDiscountPrice = 0;\n    let finalPrice = 0;\n    fetch(`${secondAPI}/orders/cart`, {\n      headers: {\n        Authorization: userToken,\n      },\n    })\n      .then((res) => res.json())\n      .then((res) => {\n        for (let i = 0; i < res.cart_list.length; i++) {\n          totalPrice += res.cart_list[i].price * res.cart_list[i].quantity;\n          totalDiscountPrice +=\n            res.cart_list[i].price * (res.cart_list[i].discount_rate / 100);\n          finalPrice = totalPrice - totalDiscountPrice;\n        }\n        this.setState({\n          cartItems: res.cart_list,\n          totalPrice: totalPrice.toLocaleString(),\n          totalDiscountPrice: totalDiscountPrice.toLocaleString(),\n          finalPrice: finalPrice.toLocaleString(),\n        });\n      });\n  };\n\n  render() {\n    const { cartItems, totalCost, totalDiscountPrice, finalPrice } = this.state;\n    const { showMiniCart } = this.props;\n\n    return (\n      <>\n        <section className=\"miniCart\">\n          <div className=\"sectionMiniCart\">\n            <div className=\"miniCartDrop\">\n              <div className=\"miniCartHeader\">\n                <h2 className=\"headerItems\">미니 장바구니</h2>\n                <div className=\"headerActions\">\n                  <div className=\"miniCartLink\">\n                    <Link to=\"/cart\">{iconData.cartIcon}</Link>\n                  </div>\n                  <button className=\"miniCartClose\" onClick={showMiniCart}>\n                    {iconData.closeIcon}\n                  </button>\n                </div>\n              </div>\n              <div className=\"productContainer\">\n                {cartItems?.map((product, index) => (\n                  <div className=\"miniCartProduct\" key={index}>\n                    <div className=\"productMini\">\n                      <div\n                        className=\"imgShoes\"\n                        title=\"루이 로페즈 프로 클래식 스웨이드\"\n                      >\n                        <img\n                          src={product.main_image}\n                          alt=\"루이 로페즈 프로 클래식 스웨이드\"\n                        ></img>\n                      </div>\n                    </div>\n                    <div className=\"productMiniDetails\">\n                      <div className=\"productMiniName\">\n                        <span>{product.series_name}</span>\n                      </div>\n                      <div className=\"productMiniOptions\">\n                        <span>{product.color}/</span>\n                        <span>{product.size}</span>\n                        <span> {product.quantity}개</span>\n                      </div>\n                      <div className=\"productMiniPrice\">\n                        {\n                          <span\n                            className={\n                              !product.discount_rate\n                                ? \"miniCartPrice\"\n                                : \"miniCartPrice underline\"\n                            }\n                          >\n                            {product.price}원{\" \"}\n                          </span>\n                        }\n                        {product.discount_rate && (\n                          <span className=\"productSale\">\n                            {product.price *\n                              ((100 - product.discount_rate) / 100)}\n                            원\n                          </span>\n                        )}\n                        {product.discount_rate && (\n                          <span className=\"discountRate\">\n                            {product.discount_rate}%\n                          </span>\n                        )}\n                      </div>\n                    </div>\n                    <div\n                      className=\"removeBtn\"\n                      onClick={() => this.handleOneDelete(product.cart_id)}\n                    >\n                      {iconData.closeIcon}\n                    </div>\n                  </div>\n                ))}\n              </div>\n              <div className=\"miniCartTotals\">\n                <div className=\"subTotals\">\n                  <div className=\"subTotalsCalc\">\n                    <span className=\"totalCost\">총 상품금액</span>\n                    <strong className=\"totalValue\">\n                      {finalPrice} 원\n                      {/* {totalDiscountPrice.toLocaleString()} */}\n                    </strong>\n                  </div>\n                  <div className=\"subTotalsMsg\">\n                    <div className=\"deliveryText\">\n                      배송비 확인 및 프로모션 코드 사용은 주문서에서 가능합니다.\n                    </div>\n                  </div>\n                </div>\n                <div className=\"miniCartActions\">\n                  <button className=\"shopNow\">바로구매</button>\n                  <button className=\"goToCart\">\n                    <Link to=\"/cart\">장바구니로 이동</Link>\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n      </>\n    );\n  }\n}\n\nexport default MiniCart;\n"]},"metadata":{},"sourceType":"module"}