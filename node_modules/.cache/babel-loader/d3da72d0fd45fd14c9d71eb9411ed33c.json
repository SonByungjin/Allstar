{"ast":null,"code":"var _jsxFileName = \"/home/user/\\uBC14\\uD0D5\\uD654\\uBA74/wecode/project/converse/12-Allstar-frontend/src/Pages/Cart/Cart.js\";\nimport React from \"react\";\nimport CartMain from \"./CartMain\";\nimport CartRight from \"./CartRight\";\nimport PromoBanner from \"../../Components/PromoBanner/PromoBanner\";\nimport Nav from \"../../Components/Nav/Nav\";\nimport Footer from \"../../Components/Footer/Footer\";\nimport { secondAPI } from \"../../Config\";\nimport \"./Cart.scss\";\n\nclass Cart extends React.Component {\n  constructor() {\n    super();\n\n    this.updateItems = () => {\n      let totalPrice = 0;\n      let totalDiscountPrice = 0;\n      let finalPrice = 0;\n      fetch(`${secondAPI}/orders/cart`, {\n        headers: {\n          Authorization: localStorage.getItem(\"token\")\n        }\n      }).then(res => res.json()).then(res => {\n        for (let i = 0; i < res.cart_list.length; i++) {\n          totalPrice += res.cart_list[i].price * res.cart_list[i].quantity;\n          totalDiscountPrice += res.cart_list[i].price * (res.cart_list[i].discount_rate / 100);\n          finalPrice = totalPrice - totalDiscountPrice;\n        }\n\n        this.setState({\n          cartItems: res.cart_list,\n          totalPrice: totalPrice.toLocaleString(),\n          totalDiscountPrice: totalDiscountPrice.toLocaleString(),\n          finalPrice: finalPrice.toLocaleString()\n        });\n      });\n    };\n\n    this.handleIncrease = cartId => {\n      const {\n        cartItems\n      } = this.state;\n      fetch(`${secondAPI}/orders/cart`, {\n        method: \"PATCH\",\n        headers: {\n          Authorization: localStorage.getItem(\"token\")\n        },\n        body: JSON.stringify({\n          cart_id: cartId,\n          quantity_change: +1\n        })\n      }).then(res => res.json()).then(res => {\n        if (res.message === \"MODIFIED\") {\n          this.updateItems();\n        }\n      });\n    };\n\n    this.handleDecrease = cartId => {\n      fetch(`${secondAPI}/orders/cart`, {\n        method: \"PATCH\",\n        headers: {\n          Authorization: localStorage.getItem(\"token\")\n        },\n        body: JSON.stringify({\n          cart_id: cartId,\n          quantity_change: -1\n        })\n      }).then(res => res.json()).then(res => {\n        if (res.message === \"MODIFIED\") {\n          this.updateItems();\n        }\n      });\n    };\n\n    this.handleOneDelete = cartId => {\n      const {\n        cartItems\n      } = this.state;\n      const action = window.confirm(\"정말로 지우시겠습니까?\");\n\n      if (action === true) {\n        fetch(`${secondAPI}/orders/cart/${cartId}`, {\n          method: \"DELETE\",\n          headers: {\n            Authorization: localStorage.getItem(\"token\")\n          }\n        }).then(res => res.json()).then(res => {\n          this.setState({\n            cartItems: cartItems.filter(cartItem => {\n              if (cartItem.cart_id === cartId) {\n                return false;\n              }\n\n              return true;\n            })\n          }, this.updateItems());\n        });\n      } else {\n        return;\n      }\n    };\n\n    this.handleAllDelete = () => {\n      const {\n        cartItems\n      } = this.state;\n      const action = window.confirm(\"정말로 비우시겠습니까?\");\n\n      if (action === true) {\n        console.log(\"삭제완료\");\n        fetch(`${secondAPI}/orders/cart`, {\n          method: \"DELETE\",\n          headers: {\n            Authorization: localStorage.getItem(\"token\")\n          }\n        }).then(res => res.json()).then(res => this.setState({\n          cartItems: []\n        }));\n      } else {\n        return;\n      }\n    };\n\n    this.state = {\n      cartItems: [],\n      recommendProducts: [],\n      totalPrice: \"\",\n      totalDiscountPrice: \"\",\n      finalPrice: \"\"\n    };\n  }\n\n  componentDidMount() {\n    let totalPrice = 0;\n    let totalDiscountPrice = 0;\n    let finalPrice = 0;\n    Promise.all([fetch(`${secondAPI}/orders/cart`, {\n      headers: {\n        Authorization: localStorage.getItem(\"token\")\n      }\n    }), fetch(\"http://localhost:3000/data/ProductDetail/CartPageRecommend.json\")]).then(([res1, res2]) => {\n      return Promise.all([res1.json(), res2.json()]);\n    }).then(([res1, res2]) => {\n      for (let i = 0; i < res1.cart_list.length; i++) {\n        totalPrice += res1.cart_list[i].price * res1.cart_list[i].quantity;\n        totalDiscountPrice += res1.cart_list[i].price * (res1.cart_list[i].discount_rate / 100);\n        finalPrice = totalPrice - totalDiscountPrice;\n      }\n\n      this.setState({\n        cartItems: res1.cart_list,\n        totalPrice: totalPrice,\n        totalDiscountPrice: totalDiscountPrice,\n        recommendProducts: res2.CartPageRecommendItems,\n        finalPrice: finalPrice\n      });\n    });\n  }\n\n  render() {\n    const {\n      cartItems,\n      totalPrice,\n      totalDiscountPrice,\n      recommendProducts,\n      finalPrice\n    } = this.state;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(PromoBanner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Nav, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"cart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"section\", {\n      className: \"cartContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CartMain, {\n      cartItems: cartItems,\n      recommendItems: recommendProducts,\n      increaseQuantity: this.handleIncrease,\n      decreaseQuantity: this.handleDecrease,\n      handleOneDelete: this.handleOneDelete,\n      handleAllDelete: this.handleAllDelete,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(CartRight, {\n      totalPrice: totalPrice,\n      totalDiscountPrice: totalDiscountPrice,\n      finalPrice: finalPrice,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nexport default Cart;","map":{"version":3,"sources":["/home/user/바탕화면/wecode/project/converse/12-Allstar-frontend/src/Pages/Cart/Cart.js"],"names":["React","CartMain","CartRight","PromoBanner","Nav","Footer","secondAPI","Cart","Component","constructor","updateItems","totalPrice","totalDiscountPrice","finalPrice","fetch","headers","Authorization","localStorage","getItem","then","res","json","i","cart_list","length","price","quantity","discount_rate","setState","cartItems","toLocaleString","handleIncrease","cartId","state","method","body","JSON","stringify","cart_id","quantity_change","message","handleDecrease","handleOneDelete","action","window","confirm","filter","cartItem","handleAllDelete","console","log","recommendProducts","componentDidMount","Promise","all","res1","res2","CartPageRecommendItems","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,WAAP,MAAwB,0CAAxB;AACA,OAAOC,GAAP,MAAgB,0BAAhB;AACA,OAAOC,MAAP,MAAmB,gCAAnB;AACA,SAASC,SAAT,QAA0B,cAA1B;AACA,OAAO,aAAP;;AAEA,MAAMC,IAAN,SAAmBP,KAAK,CAACQ,SAAzB,CAAmC;AACjCC,EAAAA,WAAW,GAAG;AACZ;;AADY,SA6CdC,WA7Cc,GA6CA,MAAM;AAClB,UAAIC,UAAU,GAAG,CAAjB;AACA,UAAIC,kBAAkB,GAAG,CAAzB;AACA,UAAIC,UAAU,GAAG,CAAjB;AAEAC,MAAAA,KAAK,CAAE,GAAER,SAAU,cAAd,EAA6B;AAChCS,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB;AADR;AADuB,OAA7B,CAAL,CAKGC,IALH,CAKSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EALjB,EAMGF,IANH,CAMSC,GAAD,IAAS;AACb,aAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,GAAG,CAACG,SAAJ,CAAcC,MAAlC,EAA0CF,CAAC,EAA3C,EAA+C;AAC7CX,UAAAA,UAAU,IAAIS,GAAG,CAACG,SAAJ,CAAcD,CAAd,EAAiBG,KAAjB,GAAyBL,GAAG,CAACG,SAAJ,CAAcD,CAAd,EAAiBI,QAAxD;AACAd,UAAAA,kBAAkB,IAChBQ,GAAG,CAACG,SAAJ,CAAcD,CAAd,EAAiBG,KAAjB,IAA0BL,GAAG,CAACG,SAAJ,CAAcD,CAAd,EAAiBK,aAAjB,GAAiC,GAA3D,CADF;AAEAd,UAAAA,UAAU,GAAGF,UAAU,GAAGC,kBAA1B;AACD;;AACD,aAAKgB,QAAL,CAAc;AACZC,UAAAA,SAAS,EAAET,GAAG,CAACG,SADH;AAEZZ,UAAAA,UAAU,EAAEA,UAAU,CAACmB,cAAX,EAFA;AAGZlB,UAAAA,kBAAkB,EAAEA,kBAAkB,CAACkB,cAAnB,EAHR;AAIZjB,UAAAA,UAAU,EAAEA,UAAU,CAACiB,cAAX;AAJA,SAAd;AAMD,OAnBH;AAoBD,KAtEa;;AAAA,SAwEdC,cAxEc,GAwEIC,MAAD,IAAY;AAC3B,YAAM;AAAEH,QAAAA;AAAF,UAAgB,KAAKI,KAA3B;AAEAnB,MAAAA,KAAK,CAAE,GAAER,SAAU,cAAd,EAA6B;AAChC4B,QAAAA,MAAM,EAAE,OADwB;AAEhCnB,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB;AADR,SAFuB;AAKhCiB,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBC,UAAAA,OAAO,EAAEN,MADU;AAEnBO,UAAAA,eAAe,EAAE,CAAC;AAFC,SAAf;AAL0B,OAA7B,CAAL,CAUGpB,IAVH,CAUSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EAVjB,EAWGF,IAXH,CAWSC,GAAD,IAAS;AACb,YAAIA,GAAG,CAACoB,OAAJ,KAAgB,UAApB,EAAgC;AAC9B,eAAK9B,WAAL;AACD;AACF,OAfH;AAgBD,KA3Fa;;AAAA,SA6Fd+B,cA7Fc,GA6FIT,MAAD,IAAY;AAC3BlB,MAAAA,KAAK,CAAE,GAAER,SAAU,cAAd,EAA6B;AAChC4B,QAAAA,MAAM,EAAE,OADwB;AAEhCnB,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB;AADR,SAFuB;AAKhCiB,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBC,UAAAA,OAAO,EAAEN,MADU;AAEnBO,UAAAA,eAAe,EAAE,CAAC;AAFC,SAAf;AAL0B,OAA7B,CAAL,CAUGpB,IAVH,CAUSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EAVjB,EAWGF,IAXH,CAWSC,GAAD,IAAS;AACb,YAAIA,GAAG,CAACoB,OAAJ,KAAgB,UAApB,EAAgC;AAC9B,eAAK9B,WAAL;AACD;AACF,OAfH;AAgBD,KA9Ga;;AAAA,SAgHdgC,eAhHc,GAgHKV,MAAD,IAAY;AAC5B,YAAM;AAAEH,QAAAA;AAAF,UAAgB,KAAKI,KAA3B;AAEA,YAAMU,MAAM,GAAGC,MAAM,CAACC,OAAP,CAAe,cAAf,CAAf;;AACA,UAAIF,MAAM,KAAK,IAAf,EAAqB;AACnB7B,QAAAA,KAAK,CAAE,GAAER,SAAU,gBAAe0B,MAAO,EAApC,EAAuC;AAC1CE,UAAAA,MAAM,EAAE,QADkC;AAE1CnB,UAAAA,OAAO,EAAE;AAAEC,YAAAA,aAAa,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB;AAAjB;AAFiC,SAAvC,CAAL,CAIGC,IAJH,CAISC,GAAD,IAASA,GAAG,CAACC,IAAJ,EAJjB,EAKGF,IALH,CAKSC,GAAD,IAAS;AACb,eAAKQ,QAAL,CACE;AACEC,YAAAA,SAAS,EAAEA,SAAS,CAACiB,MAAV,CAAkBC,QAAD,IAAc;AACxC,kBAAIA,QAAQ,CAACT,OAAT,KAAqBN,MAAzB,EAAiC;AAC/B,uBAAO,KAAP;AACD;;AACD,qBAAO,IAAP;AACD,aALU;AADb,WADF,EASE,KAAKtB,WAAL,EATF;AAWD,SAjBH;AAkBD,OAnBD,MAmBO;AACL;AACD;AACF,KA1Ia;;AAAA,SA4IdsC,eA5Ic,GA4II,MAAM;AACtB,YAAM;AAAEnB,QAAAA;AAAF,UAAgB,KAAKI,KAA3B;AAEA,YAAMU,MAAM,GAAGC,MAAM,CAACC,OAAP,CAAe,cAAf,CAAf;;AACA,UAAIF,MAAM,KAAK,IAAf,EAAqB;AACnBM,QAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACApC,QAAAA,KAAK,CAAE,GAAER,SAAU,cAAd,EAA6B;AAChC4B,UAAAA,MAAM,EAAE,QADwB;AAEhCnB,UAAAA,OAAO,EAAE;AAAEC,YAAAA,aAAa,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB;AAAjB;AAFuB,SAA7B,CAAL,CAIGC,IAJH,CAISC,GAAD,IAASA,GAAG,CAACC,IAAJ,EAJjB,EAKGF,IALH,CAKSC,GAAD,IACJ,KAAKQ,QAAL,CAAc;AACZC,UAAAA,SAAS,EAAE;AADC,SAAd,CANJ;AAUD,OAZD,MAYO;AACL;AACD;AACF,KA/Ja;;AAEZ,SAAKI,KAAL,GAAa;AACXJ,MAAAA,SAAS,EAAE,EADA;AAEXsB,MAAAA,iBAAiB,EAAE,EAFR;AAGXxC,MAAAA,UAAU,EAAE,EAHD;AAIXC,MAAAA,kBAAkB,EAAE,EAJT;AAKXC,MAAAA,UAAU,EAAE;AALD,KAAb;AAOD;;AAEDuC,EAAAA,iBAAiB,GAAG;AAClB,QAAIzC,UAAU,GAAG,CAAjB;AACA,QAAIC,kBAAkB,GAAG,CAAzB;AACA,QAAIC,UAAU,GAAG,CAAjB;AAEAwC,IAAAA,OAAO,CAACC,GAAR,CAAY,CACVxC,KAAK,CAAE,GAAER,SAAU,cAAd,EAA6B;AAChCS,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB;AADR;AADuB,KAA7B,CADK,EAMVJ,KAAK,CAAC,iEAAD,CANK,CAAZ,EAQGK,IARH,CAQQ,CAAC,CAACoC,IAAD,EAAOC,IAAP,CAAD,KAAkB;AACtB,aAAOH,OAAO,CAACC,GAAR,CAAY,CAACC,IAAI,CAAClC,IAAL,EAAD,EAAcmC,IAAI,CAACnC,IAAL,EAAd,CAAZ,CAAP;AACD,KAVH,EAWGF,IAXH,CAWQ,CAAC,CAACoC,IAAD,EAAOC,IAAP,CAAD,KAAkB;AACtB,WAAK,IAAIlC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGiC,IAAI,CAAChC,SAAL,CAAeC,MAAnC,EAA2CF,CAAC,EAA5C,EAAgD;AAC9CX,QAAAA,UAAU,IAAI4C,IAAI,CAAChC,SAAL,CAAeD,CAAf,EAAkBG,KAAlB,GAA0B8B,IAAI,CAAChC,SAAL,CAAeD,CAAf,EAAkBI,QAA1D;AACAd,QAAAA,kBAAkB,IAChB2C,IAAI,CAAChC,SAAL,CAAeD,CAAf,EAAkBG,KAAlB,IAA2B8B,IAAI,CAAChC,SAAL,CAAeD,CAAf,EAAkBK,aAAlB,GAAkC,GAA7D,CADF;AAEAd,QAAAA,UAAU,GAAGF,UAAU,GAAGC,kBAA1B;AACD;;AAED,WAAKgB,QAAL,CAAc;AACZC,QAAAA,SAAS,EAAE0B,IAAI,CAAChC,SADJ;AAEZZ,QAAAA,UAAU,EAAEA,UAFA;AAGZC,QAAAA,kBAAkB,EAAEA,kBAHR;AAIZuC,QAAAA,iBAAiB,EAAEK,IAAI,CAACC,sBAJZ;AAKZ5C,QAAAA,UAAU,EAAEA;AALA,OAAd;AAOD,KA1BH;AA2BD;;AAsHD6C,EAAAA,MAAM,GAAG;AACP,UAAM;AACJ7B,MAAAA,SADI;AAEJlB,MAAAA,UAFI;AAGJC,MAAAA,kBAHI;AAIJuC,MAAAA,iBAJI;AAKJtC,MAAAA;AALI,QAMF,KAAKoB,KANT;AAQA,wBACE,uDACE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAEE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,eAGE;AAAS,MAAA,SAAS,EAAC,MAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAS,MAAA,SAAS,EAAC,eAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,QAAD;AACE,MAAA,SAAS,EAAEJ,SADb;AAEE,MAAA,cAAc,EAAEsB,iBAFlB;AAGE,MAAA,gBAAgB,EAAE,KAAKpB,cAHzB;AAIE,MAAA,gBAAgB,EAAE,KAAKU,cAJzB;AAKE,MAAA,eAAe,EAAE,KAAKC,eALxB;AAME,MAAA,eAAe,EAAE,KAAKM,eANxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eASE,oBAAC,SAAD;AACE,MAAA,UAAU,EAAErC,UADd;AAEE,MAAA,kBAAkB,EAAEC,kBAFtB;AAGE,MAAA,UAAU,EAAEC,UAHd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATF,CADF,CAHF,eAoBE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MApBF,CADF;AAwBD;;AAnMgC;;AAsMnC,eAAeN,IAAf","sourcesContent":["import React from \"react\";\nimport CartMain from \"./CartMain\";\nimport CartRight from \"./CartRight\";\nimport PromoBanner from \"../../Components/PromoBanner/PromoBanner\";\nimport Nav from \"../../Components/Nav/Nav\";\nimport Footer from \"../../Components/Footer/Footer\";\nimport { secondAPI } from \"../../Config\";\nimport \"./Cart.scss\";\n\nclass Cart extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      cartItems: [],\n      recommendProducts: [],\n      totalPrice: \"\",\n      totalDiscountPrice: \"\",\n      finalPrice: \"\",\n    };\n  }\n\n  componentDidMount() {\n    let totalPrice = 0;\n    let totalDiscountPrice = 0;\n    let finalPrice = 0;\n\n    Promise.all([\n      fetch(`${secondAPI}/orders/cart`, {\n        headers: {\n          Authorization: localStorage.getItem(\"token\"),\n        },\n      }),\n      fetch(\"http://localhost:3000/data/ProductDetail/CartPageRecommend.json\"),\n    ])\n      .then(([res1, res2]) => {\n        return Promise.all([res1.json(), res2.json()]);\n      })\n      .then(([res1, res2]) => {\n        for (let i = 0; i < res1.cart_list.length; i++) {\n          totalPrice += res1.cart_list[i].price * res1.cart_list[i].quantity;\n          totalDiscountPrice +=\n            res1.cart_list[i].price * (res1.cart_list[i].discount_rate / 100);\n          finalPrice = totalPrice - totalDiscountPrice;\n        }\n\n        this.setState({\n          cartItems: res1.cart_list,\n          totalPrice: totalPrice,\n          totalDiscountPrice: totalDiscountPrice,\n          recommendProducts: res2.CartPageRecommendItems,\n          finalPrice: finalPrice,\n        });\n      });\n  }\n\n  updateItems = () => {\n    let totalPrice = 0;\n    let totalDiscountPrice = 0;\n    let finalPrice = 0;\n\n    fetch(`${secondAPI}/orders/cart`, {\n      headers: {\n        Authorization: localStorage.getItem(\"token\"),\n      },\n    })\n      .then((res) => res.json())\n      .then((res) => {\n        for (let i = 0; i < res.cart_list.length; i++) {\n          totalPrice += res.cart_list[i].price * res.cart_list[i].quantity;\n          totalDiscountPrice +=\n            res.cart_list[i].price * (res.cart_list[i].discount_rate / 100);\n          finalPrice = totalPrice - totalDiscountPrice;\n        }\n        this.setState({\n          cartItems: res.cart_list,\n          totalPrice: totalPrice.toLocaleString(),\n          totalDiscountPrice: totalDiscountPrice.toLocaleString(),\n          finalPrice: finalPrice.toLocaleString(),\n        });\n      });\n  };\n\n  handleIncrease = (cartId) => {\n    const { cartItems } = this.state;\n\n    fetch(`${secondAPI}/orders/cart`, {\n      method: \"PATCH\",\n      headers: {\n        Authorization: localStorage.getItem(\"token\"),\n      },\n      body: JSON.stringify({\n        cart_id: cartId,\n        quantity_change: +1,\n      }),\n    })\n      .then((res) => res.json())\n      .then((res) => {\n        if (res.message === \"MODIFIED\") {\n          this.updateItems();\n        }\n      });\n  };\n\n  handleDecrease = (cartId) => {\n    fetch(`${secondAPI}/orders/cart`, {\n      method: \"PATCH\",\n      headers: {\n        Authorization: localStorage.getItem(\"token\"),\n      },\n      body: JSON.stringify({\n        cart_id: cartId,\n        quantity_change: -1,\n      }),\n    })\n      .then((res) => res.json())\n      .then((res) => {\n        if (res.message === \"MODIFIED\") {\n          this.updateItems();\n        }\n      });\n  };\n\n  handleOneDelete = (cartId) => {\n    const { cartItems } = this.state;\n\n    const action = window.confirm(\"정말로 지우시겠습니까?\");\n    if (action === true) {\n      fetch(`${secondAPI}/orders/cart/${cartId}`, {\n        method: \"DELETE\",\n        headers: { Authorization: localStorage.getItem(\"token\") },\n      })\n        .then((res) => res.json())\n        .then((res) => {\n          this.setState(\n            {\n              cartItems: cartItems.filter((cartItem) => {\n                if (cartItem.cart_id === cartId) {\n                  return false;\n                }\n                return true;\n              }),\n            },\n            this.updateItems()\n          );\n        });\n    } else {\n      return;\n    }\n  };\n\n  handleAllDelete = () => {\n    const { cartItems } = this.state;\n\n    const action = window.confirm(\"정말로 비우시겠습니까?\");\n    if (action === true) {\n      console.log(\"삭제완료\");\n      fetch(`${secondAPI}/orders/cart`, {\n        method: \"DELETE\",\n        headers: { Authorization: localStorage.getItem(\"token\") },\n      })\n        .then((res) => res.json())\n        .then((res) =>\n          this.setState({\n            cartItems: [],\n          })\n        );\n    } else {\n      return;\n    }\n  };\n\n  render() {\n    const {\n      cartItems,\n      totalPrice,\n      totalDiscountPrice,\n      recommendProducts,\n      finalPrice,\n    } = this.state;\n\n    return (\n      <>\n        <PromoBanner />\n        <Nav />\n        <section className=\"cart\">\n          <section className=\"cartContainer\">\n            <CartMain\n              cartItems={cartItems}\n              recommendItems={recommendProducts}\n              increaseQuantity={this.handleIncrease}\n              decreaseQuantity={this.handleDecrease}\n              handleOneDelete={this.handleOneDelete}\n              handleAllDelete={this.handleAllDelete}\n            />\n            <CartRight\n              totalPrice={totalPrice}\n              totalDiscountPrice={totalDiscountPrice}\n              finalPrice={finalPrice}\n            />\n          </section>\n        </section>\n        <Footer />\n      </>\n    );\n  }\n}\n\nexport default Cart;\n"]},"metadata":{},"sourceType":"module"}